# E-Commerce-CMS

## RESTful endpoints

### POST /register
> Register a new user

*Request Header*
```
not needed  
```
*Request Body*
```
{
    "email": "<Your Email>",
    "password": "<Your Password>"
}
```
*Response (201 - Created)*
```
{
    "id": <given id by system>,
    "email": "<inputted email>",
    "role": <admin / guest>,
    "token": "<some token generated by jsonwebtoken>"
}
```
*Response (400 - Bad Request)*
```
{
    "errorCode": "SequelizeValidationError",
    "message": [
        'Please input email',
        'Please input password',
        'Please input right email'
    ]
}
```
*Response (409 - Conflict)*
```
{
    "errorCode": "UserExist",
    "message": "User already exists"
}
```

*Response (500 - Internal Server Error)*
```
{
    "errorCode": "<Some Internal Server Error Message>",
    "message": "Internal Server Error"
}
```
### POST /login
> Login as registered user

*Request Header*
```
not needed  
```
*Request Body*
```
{
    "email": "<Your Email>",
    "password": "<Your Password>"
}
```
*Response (200 - Success)*
```
{
    "id": <given id by system>,
    "email": "<inputted email>",
    "role": <admin / guest>,
    "token": "<some token generated by jsonwebtoken>"
}
```
*Response (404 - Not Found)*
```
{
    "errorCode": "UserNotFound",
    "message": "User not found"
}
```
*Response (400 - Bad Request)*
```
{
    "errorCode": "WrongPassword",
    "message": "Wrong Password"
}
```
*Response (500 - Internal Server Error)*
```
{
    "errorCode": "<Some Internal Server Error Message>",
    "message": "Internal Server Error"
}
```
### POST /orders
> Create a new order

*Request Header*
```
{
    "access_token": "<your access token>"
}
```
*Request Body*
```
{
    "quantity": <quantity of product>,
    "ProductId": <id of product>
}
```
*Response (201 - Created)*
```
{
    "id": <given by system>,
    "quantity": <inputted quantity>,
    "UserId": <your id>,
    "ProductId": <product's id>,
    "paid": false
    "createdAt": "<date the order is created>",
    "updatedAt": "<date the order is updated>",
}
```
*Response (500 - Internal Server Error)*
```
{
    "errorCode": "<Some Internal Server Error Message>",
    "message": "Internal Server Error"
}
```
### GET /orders
> Get all of your (unpaid) orders

*Request Header*
```
{
    "access_token": "<your access token>"
}
```
*Request Body*
```
not needed
```
*Response (200 - Success)*
```
[
    {
        "id": 4,
        "quantity": 1,
        "paid": false,
        "ProductId": 2,
        "UserId": 2,
        "createdAt": "2020-06-30T11:24:20.131Z",
        "updatedAt": "2020-06-30T11:24:20.131Z"
    },
    {
        "id": 3,
        "quantity": 10,
        "paid": false,
        "ProductId": 1,
        "UserId": 2,
        "createdAt": "2020-06-30T11:12:54.970Z",
        "updatedAt": "2020-06-30T11:33:30.890Z"
    }
]
```
*Response (500 - Internal Server Error)*
```
{
    "errorCode": "<Some Internal Server Error Message>",
    "message": "Internal Server Error"
}
```
### GET /checkout
> Pay all of your (unpaid) orders

*Request Header*
```
{
    "access_token": "<your access token>"
}
```
*Request Body*
```
not needed
```
*Response (200 - Success)*
```
{
    "message": "Orders paid"
}
```
*Response (500 - Internal Server Error)*
```
{
    "errorCode": "<Some Internal Server Error Message>",
    "message": "Internal Server Error"
}
```
### GET /history
> Check all of your (paid) orders

*Request Header*
```
{
    "access_token": "<your access token>"
}
```
*Request Body*
```
not needed
```
*Response (200 - Success)*
```
[
    {
        "id": 1,
        "quantity": 10,
        "paid": true,
        "ProductId": 1,
        "UserId": 2,
        "createdAt": "2020-06-30T09:36:35.820Z",
        "updatedAt": "2020-06-30T09:54:12.125Z"
    },
    {
        "id": 2,
        "quantity": 10,
        "paid": true,
        "ProductId": 2,
        "UserId": 2,
        "createdAt": "2020-06-30T09:46:49.863Z",
        "updatedAt": "2020-06-30T09:54:12.126Z"
    }
]
```
*Response (500 - Internal Server Error)*
```
{
    "errorCode": "<Some Internal Server Error Message>",
    "message": "Internal Server Error"
}
```
